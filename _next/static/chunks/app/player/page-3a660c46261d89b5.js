(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{188:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(5155),o=a(2115),r=a(7822);function l(e){let{sessionId:t}=e,[a,l]=(0,o.useState)([]),[n,c]=(0,o.useState)([]),[i,d]=(0,o.useState)(null),[h,u]=(0,o.useState)(1),[p,y]=(0,o.useState)({x:0,y:0}),[k,v]=(0,o.useState)(40),g=(0,o.useCallback)(e=>{if(e)try{let t=JSON.parse(e),a=(t.tokens||[]).map(e=>({...e,type:e.type||(e.id.startsWith("pc-")?"PC":"Enemy"),size:e.size||1,torch:e.torch||{enabled:!1,radius:5}})),s=(t.paths||[]).map(e=>({...e,id:e.id||"path-".concat(Math.random()),isPortal:e.isPortal||!1}));l(a),c(s),d(t.backgroundImage||null),u(t.playerZoom||1),y(t.playerPan||{x:0,y:0}),v(t.cellSize||40)}catch(e){console.error("Failed to parse game state from localStorage",e)}},[]);return(0,o.useEffect)(()=>{if(!t)return;let e="tabletop-alchemist-session-".concat(t);g(localStorage.getItem(e));let a=t=>{t.key===e&&g(t.newValue)};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}},[t,g]),(0,s.jsx)("div",{className:"w-screen h-dvh bg-black relative flex items-center justify-center overflow-hidden",children:(0,s.jsx)("div",{className:"w-full h-full",children:(0,s.jsx)(r.v,{showGrid:!0,snapToGrid:!1,tokens:a,paths:n,backgroundImage:i,cellSize:k,onMapClick:()=>{},onNewPath:()=>{},onEraseLine:()=>{},onEraseBrush:()=>{},onTokenTorchToggle:()=>{},onPortalToggle:()=>{},selectedTool:"select",drawMode:"wall",eraseMode:"line",isPlayerView:!0,zoom:h,pan:p})})})}function n(){let[e,t]=(0,o.useState)(null);return((0,o.useEffect)(()=>{let e=window.location.hash.substring(1);e?t(e):console.error("No session ID found in URL hash.")},[]),e)?(0,s.jsx)(l,{sessionId:e}):(0,s.jsx)("div",{children:"Loading session..."})}},335:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("CircleUserRound",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},1313:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]])},3153:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("DoorClosed",[["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}],["path",{d:"M14 12v.01",key:"xfcn54"}]])},5348:(e,t,a)=>{Promise.resolve().then(a.bind(a,188))},5731:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},7569:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[769,822,441,684,358],()=>t(5348)),_N_E=e.O()}]);