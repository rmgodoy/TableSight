(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[119],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>o});var s=a(5155),l=a(2115),r=a(4253),n=a(2085),i=a(9434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:a,variant:l,size:n,asChild:d=!1,...c}=e,h=d?r.DX:"button";return(0,s.jsx)(h,{className:(0,i.cn)(o({variant:l,size:n,className:a})),ref:t,...c})});d.displayName="Button"},1714:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eT});var s=a(5155),l=a(2115),r=a(285),n=a(6695),i=a(9471),o=a(7607),d=a(4607),c=a(286),h=a(7933),u=a(6610),m=a(3152),p=a(5222),x=a(4956),f=a(2354),g=a(7481),b=a(7489),y=a(9434);let v=l.forwardRef((e,t)=>{let{className:a,orientation:l="horizontal",decorative:r=!0,...n}=e;return(0,s.jsx)(b.b,{ref:t,decorative:r,orientation:l,className:(0,y.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...n})});v.displayName=b.b.displayName;var j=a(4809),w=a(366),N=a(8061),k=a(154),C=a(1313),S=a(8042),z=a(7326),A=a(335),T=a(2643),P=a(7569),E=a(2728),L=a(4982),I=a(799),D=a(848),V=a(3884),R=a(8082);let F=R.Kq,M=R.bL,O=R.l9,$=l.forwardRef((e,t)=>{let{className:a,sideOffset:l=4,...r}=e;return(0,s.jsx)(R.UC,{ref:t,sideOffset:l,className:(0,y.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})});$.displayName=R.UC.displayName;var _=a(6766),H=a(6424);function U(e){let{selectedTool:t,onToolSelect:a,undo:l,redo:n,resetView:i,zoomIn:o,zoomOut:d}=e,c=[{id:"select",label:"Select",icon:(0,s.jsx)(j.A,{})},{id:"draw",label:"Draw",icon:(0,s.jsx)(w.A,{})},{id:"rectangle",label:"Rectangle",icon:(0,s.jsx)(N.A,{})},{id:"circle",label:"Circle",icon:(0,s.jsx)(k.A,{})},{id:"portal",label:"Door",icon:(0,s.jsx)(C.A,{})},{id:"hidden-wall",label:"Hidden Wall",icon:(0,s.jsx)(S.A,{})},{id:"erase",label:"Erase",icon:(0,s.jsx)(z.A,{})},{id:"add-pc",label:"Add PC",icon:(0,s.jsx)(A.A,{})},{id:"add-enemy",label:"Add Enemy",icon:(0,s.jsx)(T.A,{})},{id:"add-light",label:"Add Light",icon:(0,s.jsx)(P.A,{})}],h=[{id:"undo",label:"Undo",icon:(0,s.jsx)(E.A,{}),action:l},{id:"redo",label:"Redo",icon:(0,s.jsx)(L.A,{}),action:n},{id:"zoom-in",label:"Zoom In",icon:(0,s.jsx)(I.A,{}),action:o},{id:"zoom-out",label:"Zoom Out",icon:(0,s.jsx)(D.A,{}),action:d},{id:"reset-view",label:"Reset View",icon:(0,s.jsx)(V.A,{}),action:i}];return(0,s.jsx)(F,{delayDuration:100,children:(0,s.jsxs)("aside",{className:"w-16 h-full flex flex-col items-center p-2 gap-2 border-r border-border bg-card z-20",children:[(0,s.jsx)(_.default,{src:"icons/icon.svg",alt:"TableSight Logo",width:32,height:32,className:"text-primary my-1"}),(0,s.jsx)(v,{}),(0,s.jsx)(H.F,{className:"flex-1 w-full",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 py-2",children:[(0,s.jsx)("div",{className:"flex flex-col gap-2",children:c.map(e=>(0,s.jsxs)(M,{children:[(0,s.jsx)(O,{asChild:!0,children:(0,s.jsx)(r.$,{size:"icon",variant:t===e.id?"default":"ghost",className:"w-10 h-10",onClick:()=>a(e.id),children:e.icon})}),(0,s.jsx)($,{side:"right",children:(0,s.jsx)("p",{children:e.label})})]},e.id))}),(0,s.jsx)(v,{className:"my-2"}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:h.map(e=>(0,s.jsxs)(M,{children:[(0,s.jsx)(O,{asChild:!0,children:(0,s.jsx)(r.$,{size:"icon",variant:"ghost",className:"w-10 h-10",onClick:e.action,children:e.icon})}),(0,s.jsx)($,{side:"right",children:(0,s.jsx)("p",{children:e.label})})]},e.id))})]})})]})})}var Z=a(3153),W=a(8350),B=a(5599),K=a(7223),q=a(8098),G=a(8553),J=a(6438),X=a(8046),Q=a(8186),Y=a(2523),ee=a(8176);let et=ee.bL,ea=ee.l9,es=l.forwardRef((e,t)=>{let{className:a,align:l="center",sideOffset:r=4,...n}=e;return(0,s.jsx)(ee.ZL,{children:(0,s.jsx)(ee.UC,{ref:t,align:l,sideOffset:r,className:(0,y.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});es.displayName=ee.UC.displayName;var el=a(6874),er=a.n(el),en=a(968),ei=a(2085);let eo=(0,ei.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ed=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(en.b,{ref:t,className:(0,y.cn)(eo(),a),...l})});ed.displayName=en.b.displayName;var ec=a(9864),eh=a(124);let eu=(0,ei.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}});l.forwardRef((e,t)=>{let{className:a,variant:l,size:r,...n}=e;return(0,s.jsx)(eh.b,{ref:t,className:(0,y.cn)(eu({variant:l,size:r,className:a})),...n})}).displayName=eh.b.displayName;let em=l.createContext({size:"default",variant:"default"}),ep=l.forwardRef((e,t)=>{let{className:a,variant:l,size:r,children:n,...i}=e;return(0,s.jsx)(ec.bL,{ref:t,className:(0,y.cn)("flex items-center justify-center gap-1",a),...i,children:(0,s.jsx)(em.Provider,{value:{variant:l,size:r},children:n})})});ep.displayName=ec.bL.displayName;let ex=l.forwardRef((e,t)=>{let{className:a,children:r,variant:n,size:i,...o}=e,d=l.useContext(em);return(0,s.jsx)(ec.q7,{ref:t,className:(0,y.cn)(eu({variant:d.variant||n,size:d.size||i}),a),...o,children:r})});ex.displayName=ec.q7.displayName;let ef=e=>{let{token:t,onTokenHpChange:a}=e,[r,n]=(0,l.useState)(t.hp.current.toString());(0,l.useEffect)(()=>{n(t.hp.current.toString())},[t.hp]);let i=()=>{let e=parseInt(r,10);isNaN(e)||e===t.hp.current?n(t.hp.current.toString()):a(t.id,{...t.hp,current:e})};return(0,s.jsx)(Y.p,{id:"hp-current-".concat(t.id),type:"number",value:r,onChange:e=>n(e.target.value),onBlur:i,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),i(),e.target.blur()),"Escape"===e.key&&e.target.blur()},className:"h-8 w-20 text-center","aria-label":"Current HP"})};function eg(e){let{tokens:t,sessionName:a,isPlayerViewFrozen:i,onVisibilityChange:m,onToggleAllEnemiesVisibility:p,onTokenDelete:x,onTokenDuplicate:f,onTokenNameChange:b,onTokenColorChange:j,onTokenIconChange:w,onTokenSizeChange:N,onTokenTorchToggle:k,onTokenTorchRadiusChange:C,onTokenHpChange:z,onTokenHover:E,sessionId:L,syncPlayerView:I,matchPlayerView:D,togglePlayerViewFreeze:V,followedTokenId:R,onToggleFollowToken:F}=e,{toast:M}=(0,g.dj)(),[O,$]=(0,l.useState)(""),[_,U]=(0,l.useState)("combatants");(0,l.useEffect)(()=>{$("".concat(window.location.origin).concat("/TableSight","/player#").concat(L))},[L]);let ee=(0,l.useMemo)(()=>{switch(_){case"lights":return t.filter(e=>"Light"===e.type);case"portals":return t.filter(e=>"Portal"===e.type);default:return t.filter(e=>"PC"===e.type||"Enemy"===e.type)}},[t,_]),el=t.filter(e=>"Enemy"===e.type),en=el.length>0&&el.every(e=>e.visible),ei=(e,t)=>{var a;let s=null==(a=t.target.files)?void 0:a[0];if(s){let t=new FileReader;t.onload=t=>{var a;(null==(a=t.target)?void 0:a.result)&&w(e,t.target.result)},t.readAsDataURL(s)}},eo=e=>e.iconUrl?null:"PC"===e.type?(0,s.jsx)(A.A,{className:"text-white/80"}):"Enemy"===e.type?(0,s.jsx)(T.A,{className:"text-white/80"}):"Light"===e.type?(0,s.jsx)(P.A,{className:(0,y.cn)("text-white/80",e.torch.enabled&&"text-yellow-300")}):"Portal"===e.type?e.name.toLowerCase().includes("wall")?(0,s.jsx)(S.A,{className:"text-gray-400"}):(0,s.jsx)(Z.A,{className:"text-red-300"}):null;return(0,s.jsxs)("div",{className:"h-full flex flex-col gap-4",children:[(0,s.jsxs)(n.Zp,{className:"w-full flex flex-col flex-1 min-h-0",children:[(0,s.jsx)(n.aR,{children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)(n.ZB,{children:a||"Tokens"}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,s.jsxs)(ep,{type:"single",value:_,onValueChange:e=>e&&U(e),size:"sm",children:[(0,s.jsx)(ex,{value:"combatants","aria-label":"Combatants",children:(0,s.jsx)(c.A,{className:"h-4 w-4"})}),(0,s.jsx)(ex,{value:"lights","aria-label":"Lights",children:(0,s.jsx)(P.A,{className:"h-4 w-4"})}),(0,s.jsx)(ex,{value:"portals","aria-label":"Portals",children:(0,s.jsx)(Z.A,{className:"h-4 w-4"})})]}),"combatants"===_&&el.length>0&&(0,s.jsxs)(r.$,{variant:"outline",size:"sm",onClick:p,title:en?"Hide All Enemies":"Show All Enemies",children:[en?(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4"}):(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4"}),en?"Hide All":"Show All"]})]})]})}),(0,s.jsx)(n.Wu,{className:"flex-1 overflow-hidden p-0",children:(0,s.jsx)(H.F,{className:"h-full w-full p-6 pt-0",children:0===ee.length?(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"No tokens of this type."}):(0,s.jsx)("ul",{className:"space-y-2",children:ee.map(e=>(0,s.jsxs)("li",{className:"flex flex-col p-2 rounded-md hover:bg-accent/50 transition-colors gap-2 text-sm",onMouseEnter:()=>E(e.id),onMouseLeave:()=>E(null),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,s.jsx)("div",{className:(0,y.cn)("w-8 h-8 rounded-full flex items-center justify-center ring-2 ring-white/50 shadow-lg shrink-0 bg-cover bg-center"),style:{backgroundColor:"Light"===e.type||"Portal"===e.type?"transparent":e.color,backgroundImage:e.iconUrl?"url(".concat(e.iconUrl,")"):"none"},children:eo(e)}),(0,s.jsx)(Y.p,{className:"h-8 border-none bg-transparent focus-visible:ring-1 focus-visible:ring-ring truncate",value:e.name,onChange:t=>b(e.id,t.target.value),"aria-label":"Token name",disabled:"Light"===e.type||"Portal"===e.type})]}),(0,s.jsxs)("div",{className:"flex items-center shrink-0",children:["Light"!==e.type&&"Portal"!==e.type&&(0,s.jsx)(r.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>m(e.id,!e.visible),title:e.visible?"Hide Token":"Show Token",children:e.visible?(0,s.jsx)(o.A,{className:"h-4 w-4"}):(0,s.jsx)(d.A,{className:"h-4 w-4"})}),(0,s.jsxs)(et,{children:[(0,s.jsx)(ea,{asChild:!0,children:(0,s.jsx)(r.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(W.A,{className:"h-4 w-4"})})}),(0,s.jsx)(es,{className:"w-auto p-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,s.jsx)(ed,{children:"Color"}),(0,s.jsx)("input",{type:"color",value:e.color,onChange:t=>j(e.id,t.target.value),className:"w-10 h-10 border-none cursor-pointer",title:"Change token color",disabled:"Light"===e.type||"Portal"===e.type})]}),(0,s.jsx)(v,{orientation:"vertical",className:"h-16"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"file",accept:"image/*",className:"hidden",id:"file-input-".concat(e.id),onChange:t=>ei(e.id,t)}),(0,s.jsx)(r.$,{disabled:"Light"===e.type||"Portal"===e.type,onClick:()=>{var t;return null==(t=document.getElementById("file-input-".concat(e.id)))?void 0:t.click()},children:"Upload Icon"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ed,{children:"Size"}),(0,s.jsx)(Y.p,{type:"number",min:1,max:20,value:e.size,onChange:t=>N(e.id,parseInt(t.target.value,10)||1),className:"h-8 w-20 text-center",disabled:"Light"===e.type||"Portal"===e.type})]}),"Enemy"===e.type&&e.hp&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ed,{children:"Max HP"}),(0,s.jsx)(Y.p,{type:"number",value:e.hp.max,onChange:t=>z(e.id,{...e.hp,max:parseInt(t.target.value,10)||0}),className:"h-8 w-20 text-center","aria-label":"Maximum HP"})]})]}),(0,s.jsx)(v,{orientation:"vertical",className:"h-16"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)(r.$,{variant:"ghost",size:"sm",className:(0,y.cn)("justify-start",R===e.id&&"bg-accent text-accent-foreground"),title:R===e.id?"Unfollow Token":"Follow Token",onClick:()=>F(e.id),disabled:"Light"===e.type||"Portal"===e.type,children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Follow"]}),(0,s.jsxs)(r.$,{variant:"ghost",size:"sm",className:"justify-start",title:"Duplicate Token",onClick:()=>f(e.id),disabled:"Light"===e.type||"Portal"===e.type,children:[(0,s.jsx)(B.A,{className:"mr-2 h-4 w-4"})," Duplicate"]}),(0,s.jsxs)(r.$,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive justify-start",title:"Delete Token",onClick:()=>x(e.id),children:[(0,s.jsx)(K.A,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]})]})]}),(0,s.jsxs)("div",{className:"pl-10 flex flex-col items-start gap-4",children:["Enemy"===e.type&&e.hp&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(q.A,{className:"h-4 w-4 text-red-500"}),(0,s.jsx)(ed,{htmlFor:"hp-current-".concat(e.id),children:"HP"}),(0,s.jsx)(ef,{token:e,onTokenHpChange:z})]}),("PC"===e.type||"Enemy"===e.type||"Light"===e.type)&&(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)(r.$,{variant:"ghost",className:"h-8 px-2 justify-start",onClick:()=>k(e.id),children:[(0,s.jsx)(G.A,{className:(0,y.cn)("h-4 w-4 mr-2",e.torch.enabled?"text-orange-500":"text-muted-foreground")}),(0,s.jsx)("span",{className:(0,y.cn)(e.torch.enabled?"text-primary":"text-muted-foreground"),children:"Torch"})]}),e.torch.enabled&&(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,s.jsx)(r.$,{size:"icon",variant:"outline",className:"h-8 w-8 shrink-0",onClick:()=>C(e.id,Math.max(1,e.torch.radius-1)),children:(0,s.jsx)(J.A,{})}),(0,s.jsx)(Y.p,{type:"number",min:1,max:999,value:e.torch.radius,onChange:t=>C(e.id,parseInt(t.target.value,10)||1),className:"h-8 w-full text-center"}),(0,s.jsx)(r.$,{size:"icon",variant:"outline",className:"h-8 w-8 shrink-0",onClick:()=>C(e.id,e.torch.radius+1),children:(0,s.jsx)(X.A,{})})]})]})]})]},e.id))})})})]}),(0,s.jsx)(n.Zp,{children:(0,s.jsxs)(n.Wu,{className:"p-2 space-y-2",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground p-2",children:"Share this URL for the player screen."}),(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2",children:[(0,s.jsx)(Y.p,{readOnly:!0,value:O,className:"bg-muted border-none"}),(0,s.jsx)(r.$,{size:"icon",variant:"outline",onClick:()=>{navigator.clipboard&&(navigator.clipboard.writeText(O),M({title:"Player URL Copied!",description:"Share this link with your players."}))},children:(0,s.jsx)(B.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)(r.$,{variant:"outline",onClick:I,children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4"})," Sync View"]}),(0,s.jsxs)(r.$,{variant:"outline",onClick:D,children:[(0,s.jsx)(c.A,{className:"mr-2 h-4 w-4"})," Match View"]})]}),(0,s.jsx)(v,{}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)(r.$,{variant:"outline",asChild:!0,children:(0,s.jsxs)(er(),{href:"/",children:[(0,s.jsx)(Q.A,{className:"mr-2 h-4 w-4"})," Home"]})}),(0,s.jsxs)(r.$,{variant:i?"destructive":"outline",onClick:V,children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"})," Freeze"]})]})]})})]})}var eb=a(7822),ey=a(4073);let ev=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsxs)(ey.bL,{ref:t,className:(0,y.cn)("relative flex w-full touch-none select-none items-center",a),...l,children:[(0,s.jsx)(ey.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(ey.Q6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(ey.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});ev.displayName=ey.bL.displayName;var ej=a(4884);let ew=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(ej.bL,{className:(0,y.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...l,ref:t,children:(0,s.jsx)(ej.zi,{className:(0,y.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});ew.displayName=ej.bL.displayName;var eN=a(3221),ek=a.n(eN);function eC(e){return e.points.map(e=>e.map(e=>[e.x,e.y]))}async function eS(e){if(0===e.length)return null;if(1===e.length)return[{points:e[0].points,color:e[0].color,width:e[0].width,blocksLight:e[0].blocksLight,isPortal:!1,isClosed:!0,isHiddenWall:!1}];try{let t=e.map(eC),a=ek().union(...t);if(0===a.length)return console.error("Polygon clipping returned an empty result."),[];let s=e[0];return a.map(t=>({points:t.map(e=>e.map(e=>({x:e[0],y:e[1]}))),color:s.color,width:s.width,blocksLight:e.some(e=>e.blocksLight),isPortal:!1,isClosed:!0,isHiddenWall:!1}))}catch(e){return console.error("Failed to merge shapes:",e),null}}let ez=["#000000","#ef4444","#f97316","#eab308","#84cc16","#22c55e","#14b8a6","#06b6d4","#3b82f6","#8b5cf6","#d946ef","#f43f5e"];function eA(e){var t;let{sessionId:a}=e,[b,v]=(0,l.useState)([]),[j,w]=(0,l.useState)(-1),[N,k]=(0,l.useState)(!0),[C,S]=(0,l.useState)(!0),[z,A]=(0,l.useState)(!1),[T,P]=(0,l.useState)("select"),[E,L]=(0,l.useState)("line"),[I,D]=(0,l.useState)("wall"),[V,R]=(0,l.useState)("#000000"),[F,M]=(0,l.useState)(5),[O,$]=(0,l.useState)(20),[_,H]=(0,l.useState)(null),[Z,W]=(0,l.useState)(!1),[B,K]=(0,l.useState)(null),[q,G]=(0,l.useState)(!1),[J,X]=(0,l.useState)(null),Q=b[j]||{paths:[],tokens:[],backgroundImage:null,cellSize:40},{paths:Y,tokens:ee,backgroundImage:el,cellSize:er,sessionName:en}=Q,[ei,eo]=(0,l.useState)(1),[ec,eh]=(0,l.useState)({x:0,y:0}),[eu,em]=(0,l.useState)(1),[ef,ey]=(0,l.useState)({x:0,y:0}),[ej,eN]=(0,l.useState)(!0),{toast:eA}=(0,g.dj)(),eT="tablesight-session-".concat(a),eP=(0,l.useCallback)(e=>{v(t=>{let a=t.slice(0,j+1),s=a[a.length-1]||{paths:[],tokens:[],backgroundImage:null,cellSize:40,sessionName:""};return a.push({...s,...e}),a}),w(e=>e+1)},[j]);(0,l.useEffect)(()=>{(()=>{try{let e=localStorage.getItem(eT);if(e){let t=JSON.parse(e),a=(t.paths||[]).map(e=>({...e,id:e.id||"path-".concat(Math.random()),isPortal:e.isPortal||!1,isHiddenWall:e.isHiddenWall||!1,points:e.points&&e.points.length>0&&Array.isArray(e.points[0])?e.points:[e.points||[]],tool:e.tool||"draw",isClosed:void 0!==e.isClosed?e.isClosed:"draw"!==e.tool})),s=(t.tokens||[]).map(e=>({...e,type:e.type||(e.id.startsWith("pc-")?"PC":"Enemy"),size:e.size||1,torch:e.torch||{enabled:!1,radius:5},hp:e.hp||("Enemy"===e.type?{current:10,max:10}:void 0)})),l=t.backgroundImage||null,r=t.cellSize||40,n=t.sessionName||"";v([{sessionName:n,paths:a,tokens:s,backgroundImage:l,cellSize:r}]),w(0),t.zoom&&eo(t.zoom),t.pan&&eh(t.pan),t.playerZoom&&em(t.playerZoom),t.playerPan&&ey(t.playerPan),t.isPlayerViewFrozen&&W(t.isPlayerViewFrozen),t.playerViewport&&K(t.playerViewport),t.followedTokenId&&X(t.followedTokenId)}else v([{sessionName:"",paths:[],tokens:[],backgroundImage:null,cellSize:40}]),w(0)}catch(e){console.error("Failed to load game state from localStorage",e),v([{sessionName:"",paths:[],tokens:[],backgroundImage:null,cellSize:40}]),w(0)}})();let e=e=>{if(e.key===eT){let t=e.newValue;if(t){let e=JSON.parse(t);e.playerZoom&&em(e.playerZoom),e.playerPan&&ey(e.playerPan),e.isPlayerViewFrozen&&W(e.isPlayerViewFrozen),e.playerViewport&&K(e.playerViewport)}}};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[a]),(0,l.useEffect)(()=>{if(j<0)return;let e={...Q,zoom:ei,pan:ec,playerZoom:eu,playerPan:ef,playerViewport:null!=B?B:void 0,lastModified:Date.now(),isPlayerViewFrozen:Z,followedTokenId:J},t=setTimeout(()=>{try{localStorage.setItem(eT,JSON.stringify(e))}catch(e){console.error("Failed to save game state to localStorage",e),eA({title:"Error",description:"Could not save game state. Your browser might be in private mode or storage is full.",variant:"destructive"})}},500);return()=>clearTimeout(t)},[Q,ei,ec,eu,ef,B,j,eT,eA,Z,J]),(0,l.useEffect)(()=>{if(!J||!B)return;let e=ee.find(e=>e.id===J);if(!e)return void X(null);let t=e.x*er+e.size*er/2,a=e.y*er+e.size*er/2;ey({x:B.width/2-t*eu,y:B.height/2-a*eu})},[J,ee,B,eu,er]);let eE=(0,l.useCallback)(()=>{j>0&&w(e=>e-1)},[j]),eL=(0,l.useCallback)(()=>{j<b.length-1&&w(e=>e+1)},[b,j]);(0,l.useEffect)(()=>{let e=e=>{let t=e.target;"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable&&(e.ctrlKey||e.metaKey)&&("z"===e.key?(e.preventDefault(),eE()):("y"===e.key||e.shiftKey&&"z"===e.key)&&(e.preventDefault(),eL()))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[eE,eL]);let eI=(0,l.useCallback)(async e=>{let t="portal"===T,a="hidden-wall"===T,s={...e,id:"path-".concat(Date.now()),isPortal:t,isHiddenWall:a,blocksLight:t||a||"wall"===I},l=[...ee];if((t||a)&&s.points.length>0&&s.points[0].length>0){let e=s.points[0],{x:t,y:r}=e.reduce((e,t)=>({x:e.x+t.x,y:e.y+t.y}),{x:0,y:0}),n=t/e.length,i=r/e.length,o={id:"portal-token-".concat(Date.now()),name:a?"Hidden Wall ".concat(ee.filter(e=>"Portal"===e.type).length+1):"Portal ".concat(ee.filter(e=>"Portal"===e.type).length+1),x:n,y:i,type:"Portal",visible:!1,color:"#ff00ff",size:1,torch:{enabled:!1,radius:0},controls:s.id};l.push(o)}if(z&&s.isClosed){let e=Y.filter(e=>(function(e,t){try{let a=eC(e),s=eC(t);return ek().intersection([a],[s]).length>0}catch(e){return console.error("Failed to check path intersection:",e),!1}})(e,s));if(e.length>0){let t=[...e,s].map(e=>({...e,isClosed:!0})),a=await eS(t);if(a&&a.length>0){let t=a.map((e,t)=>({...e,id:"path-".concat(Date.now(),"-merged-").concat(t),tool:T,isClosed:!0})),s=new Set(e.map(e=>e.id));eP({paths:[...Y.filter(e=>!s.has(e.id)),...t],tokens:l})}else eP({paths:[...Y,s],tokens:l})}else eP({paths:[...Y,s],tokens:l})}else eP({paths:[...Y,s],tokens:l})},[Y,ee,eP,I,z,T]),eD=(0,l.useCallback)(e=>{let t=(e,t)=>(e.x-t.x)**2+(e.y-t.y)**2,a=(e,a,s)=>{let l=t(a,s);if(0===l)return t(e,a);let r=((e.x-a.x)*(s.x-a.x)+(e.y-a.y)*(s.y-a.y))/l;return r=Math.max(0,Math.min(1,r)),t(e,{x:a.x+r*(s.x-a.x),y:a.y+r*(s.y-a.y)})},s=Y.find(t=>{for(let s of t.points){for(let t=0;t<s.length-1;t++)if(400>a(e,s[t],s[t+1]))return!0;if(!t.isClosed&&s.length>0&&400>a(e,s[s.length-1],s[0]))return!0}return!1});s&&eP({paths:Y.filter(e=>e.id!==s.id)})},[Y,eP]),eV=(0,l.useCallback)(e=>{eP({paths:e})},[eP]),eR=(0,l.useCallback)((e,t)=>{eP({tokens:ee.map(a=>a.id===e?{...a,...t}:a)})},[ee,eP]),eF=(0,l.useCallback)(()=>{let e=ee.filter(e=>"Enemy"===e.type);if(0===e.length)return;let t=e.some(e=>!e.visible);eP({tokens:ee.map(e=>"Enemy"===e.type?{...e,visible:t}:e)})},[ee,eP]),eM=e=>{let t=ee.find(t=>t.id===e);t&&eR(e,{torch:{...t.torch,enabled:!t.torch.enabled}})},eO=(0,l.useCallback)(e=>{let t=b.slice(0,j+1),a=t[t.length-1];if(!a)return;let s=a.tokens.find(t=>t.id===e);if(!s||!s.controls)return;let l=a.paths.map(e=>e.id===s.controls?{...e,blocksLight:!e.blocksLight}:e),r={...a,paths:l};t.push(r),v(t),w(t.length-1)},[b,j]),e$=e=>eo(t=>Math.max(.1,Math.min(5,t+e))),e_="draw"===T||"rectangle"===T||"circle"===T,eH="portal"===T,eU="hidden-wall"===T,eZ="add-light"===T;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex h-dvh w-screen bg-background text-foreground",children:[(0,s.jsx)(U,{selectedTool:T,onToolSelect:P,undo:eE,redo:eL,resetView:()=>{eo(1),eh({x:0,y:0})},zoomIn:()=>e$(.1),zoomOut:()=>e$(-.1)}),(0,s.jsxs)("main",{className:"flex-1 flex flex-col relative bg-muted/30",children:[(0,s.jsxs)("div",{className:"absolute top-2 left-2 z-10 p-2 rounded-lg bg-card border border-border flex items-center gap-2",children:[(0,s.jsx)(r.$,{variant:N?"default":"outline",onClick:()=>k(!N),size:"icon",className:"w-8 h-8",children:(0,s.jsx)(i.A,{})}),(0,s.jsx)(r.$,{variant:ej?"default":"outline",onClick:()=>eN(!ej),size:"icon",className:"w-8 h-8",children:ej?(0,s.jsx)(o.A,{}):(0,s.jsx)(d.A,{})}),(0,s.jsx)(r.$,{variant:q?"default":"outline",onClick:()=>G(!q),size:"icon",className:"w-8 h-8",children:(0,s.jsx)(c.A,{})})]}),J&&(0,s.jsxs)("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 p-2 rounded-lg bg-purple-600 text-white flex items-center gap-2 text-lg font-bold",children:[(0,s.jsx)(h.A,{className:"h-6 w-6"})," Following ",null==(t=ee.find(e=>e.id===J))?void 0:t.name]}),Z&&!J&&(0,s.jsxs)("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 p-2 rounded-lg bg-blue-600 text-white flex items-center gap-2 text-lg font-bold animate-pulse",children:[(0,s.jsx)(u.A,{className:"h-6 w-6"})," Player View Frozen"]}),(e_||eH||eU||eZ)&&(0,s.jsx)(n.Zp,{className:"absolute top-2 left-36 z-10 p-2 rounded-lg bg-card border border-border flex items-center gap-4",children:(0,s.jsxs)(n.Wu,{className:"p-2 flex items-center gap-4",children:[e_&&(0,s.jsxs)(ep,{type:"single",value:I,onValueChange:e=>e&&D(e),children:[(0,s.jsxs)(ex,{value:"wall","aria-label":"Draw as walls",children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"ml-2",children:"Wall"})]}),(0,s.jsxs)(ex,{value:"detail","aria-label":"Draw as details",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"ml-2",children:"Detail"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(ew,{id:"snap-to-grid",checked:C,onCheckedChange:S}),(0,s.jsx)(ed,{htmlFor:"snap-to-grid",children:"Snap"})]}),e_&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(ew,{id:"smart-mode",checked:z,onCheckedChange:A}),(0,s.jsx)(ed,{htmlFor:"smart-mode",children:"Smart"})]}),(e_||eH||eU)&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ed,{className:"text-sm font-medium",children:"Size"}),(0,s.jsx)(ev,{id:"brush-size-slider",min:2,max:50,step:1,value:[F],onValueChange:e=>M(e[0]),className:"w-32"}),(0,s.jsx)("span",{className:"text-sm font-bold w-8 text-center",children:F})]}),e_&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ed,{className:"text-sm font-medium",children:"Color"}),(0,s.jsxs)(et,{children:[(0,s.jsx)(ea,{asChild:!0,children:(0,s.jsx)(r.$,{style:{backgroundColor:V},className:"w-8 h-8 rounded-md border-2 border-border"})}),(0,s.jsx)(es,{className:"w-auto p-0 border-none",children:(0,s.jsx)("div",{className:"grid grid-cols-6 gap-1 p-1 bg-card rounded-md",children:ez.map(e=>(0,s.jsx)("button",{type:"button",className:(0,y.cn)("w-8 h-8 rounded-md border-2 transition-all",V===e?"border-primary":"border-transparent hover:border-muted-foreground/50"),style:{backgroundColor:e},onClick:()=>R(e),"aria-label":"Select color ".concat(e)},e))})})]})]})]})}),"erase"===T&&(0,s.jsx)(n.Zp,{className:"absolute top-2 left-36 z-10 p-2 rounded-lg bg-card border border-border flex items-center gap-4",children:(0,s.jsxs)(n.Wu,{className:"p-2 flex items-center gap-4",children:[(0,s.jsxs)(ep,{type:"single",value:E,onValueChange:e=>e&&L(e),children:[(0,s.jsx)(ex,{value:"line","aria-label":"Erase whole line",children:(0,s.jsx)(x.A,{className:"h-4 w-4"})}),(0,s.jsx)(ex,{value:"brush","aria-label":"Erase with brush",children:(0,s.jsx)(f.A,{className:"h-4 w-4"})})]}),"brush"===E&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ed,{className:"text-sm font-medium",children:"Eraser Size"}),(0,s.jsx)(ev,{id:"eraser-size-slider",min:5,max:100,step:1,value:[O],onValueChange:e=>$(e[0]),className:"w-32"}),(0,s.jsx)("span",{className:"text-sm font-bold w-8 text-center",children:O})]})]})}),(0,s.jsx)("div",{className:"flex-1 relative overflow-hidden",children:(0,s.jsx)(eb.v,{showGrid:N,snapToGrid:C,tokens:ee,paths:Y,backgroundImage:el,cellSize:er,onMapClick:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];let a=null;"add-pc"===T?a={id:"pc-".concat(Date.now()),name:"PC ".concat(ee.filter(e=>"PC"===e.type).length+1),x:e,y:t,type:"PC",visible:!0,color:"#3b82f6",size:1,torch:{enabled:!1,radius:5}}:"add-enemy"===T?a={id:"enemy-".concat(Date.now()),name:"Enemy ".concat(ee.filter(e=>"Enemy"===e.type).length+1),x:e,y:t,type:"Enemy",visible:!1,color:"#ef4444",size:1,torch:{enabled:!1,radius:5},hp:{current:10,max:10}}:"add-light"===T&&(a={id:"light-".concat(Date.now()),name:"Light ".concat(ee.filter(e=>"Light"===e.type).length+1),x:e,y:t,type:"Light",visible:!1,color:"#fBBF24",size:1,torch:{enabled:!0,radius:10}}),a&&eP({tokens:[...ee,a]})},onEraseLine:eD,onEraseBrush:eV,onNewPath:eI,onTokenTorchToggle:eM,onPortalToggle:eO,selectedTool:T,eraseMode:E,drawMode:I,smartMode:z,onTokenMove:(e,t,a)=>eR(e,{x:t,y:a}),brushColor:V,brushSize:F,eraseBrushSize:O,zoom:ei,pan:ec,onZoomChange:eo,onPanChange:eh,showFogOfWar:ej,hoveredTokenId:_,playerPan:ef,playerZoom:eu,onPlayerPanChange:ey,onPlayerZoomChange:em,playerViewport:B,showPlayerViewport:q,followedTokenId:J})})]}),(0,s.jsx)("aside",{className:"w-80 h-full flex flex-col p-4 gap-4 border-l border-border bg-card z-20 overflow-hidden",children:(0,s.jsx)(eg,{tokens:ee,sessionName:en,isPlayerViewFrozen:Z,onVisibilityChange:(e,t)=>eR(e,{visible:t}),onToggleAllEnemiesVisibility:eF,onTokenDelete:e=>{let t=ee.find(t=>t.id===e),a=Y;t&&"Portal"===t.type&&t.controls&&(a=Y.filter(e=>e.id!==t.controls)),e===J&&X(null),eP({tokens:ee.filter(t=>t.id!==e),paths:a})},onTokenDuplicate:e=>{let t=ee.find(t=>t.id===e);t&&eP({tokens:[...ee,{...t,id:"".concat(t.type.toLowerCase(),"-").concat(Date.now()),name:"".concat(t.name," (copy)"),x:t.x+1,y:t.y+1}]})},onTokenNameChange:(e,t)=>eR(e,{name:t}),onTokenColorChange:(e,t)=>eR(e,{color:t}),onTokenIconChange:(e,t)=>eR(e,{iconUrl:t}),onTokenSizeChange:(e,t)=>eR(e,{size:t}),onTokenTorchToggle:eM,onTokenTorchRadiusChange:(e,t)=>{let a=ee.find(t=>t.id===e);a&&eR(e,{torch:{...a.torch,radius:t}})},onTokenHpChange:(e,t)=>{eR(e,{hp:t})},onTokenHover:H,sessionId:a,syncPlayerView:()=>{ey(ec),em(ei),X(null),eA({title:"Player View Synced!",description:"The player's view now matches yours."})},matchPlayerView:()=>{eh(ef),eo(eu)},togglePlayerViewFreeze:()=>W(e=>!e),followedTokenId:J,onToggleFollowToken:e=>{X(t=>t===e?null:e)}})})]})})}function eT(){let[e,t]=(0,l.useState)(null);return((0,l.useEffect)(()=>{let e=window.location.hash.substring(1);e?t(e):console.error("No session ID found in URL hash.")},[]),e)?(0,s.jsx)(eA,{sessionId:e}):(0,s.jsx)("div",{children:"Loading session..."})}},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var s=a(5155),l=a(2115),r=a(9434);let n=l.forwardRef((e,t)=>{let{className:a,type:l,...n}=e;return(0,s.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},4933:(e,t,a)=>{Promise.resolve().then(a.bind(a,1714))},6424:(e,t,a)=>{"use strict";a.d(t,{F:()=>i});var s=a(5155),l=a(2115),r=a(7655),n=a(9434);let i=l.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,s.jsxs)(r.bL,{ref:t,className:(0,n.cn)("relative overflow-hidden",a),...i,children:[(0,s.jsx)(r.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,s.jsx)(o,{}),(0,s.jsx)(r.OK,{})]})});i.displayName=r.bL.displayName;let o=l.forwardRef((e,t)=>{let{className:a,orientation:l="vertical",...i}=e;return(0,s.jsx)(r.VM,{ref:t,orientation:l,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,s.jsx)(r.lr,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=r.VM.displayName},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i});var s=a(5155),l=a(2115),r=a(9434);let n=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});n.displayName="Card";let i=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});i.displayName="CardHeader";let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});o.displayName="CardTitle";let d=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})});d.displayName="CardDescription";let c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...l})});c.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(2115);let l=0,r=new Map,n=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function h(e){let{...t}=e,a=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:h,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[769,324,722,380,822,441,684,358],()=>t(4933)),_N_E=e.O()}]);